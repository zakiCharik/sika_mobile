<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#2196f3">
<!--   <meta http-equiv="Content-Security-Policy" content="default-src *; child-src * 'self' blob: http:; img-src * 'self' data: http:; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src 'self' 'unsafe-inline' *">
 -->  
  <meta http-equiv="Content-Security-Policy" content="default-src *; child-src * 'self' blob: polyblob: http:; img-src * 'self' data: http:; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src 'self' 'unsafe-inline' *; media-src * blob: polyblob:">

  <title>SIKA - Rewarding Loyalty Mobile application</title>
  <link rel="stylesheet" href=".././lib/css/framework7.css">
  <link rel="stylesheet" href="../css/app.css">
  <link rel="apple-touch-icon" href="../img/f7-icon-square.png">
  <link rel="icon" href="../img/f7-icon.png">
  <link rel="stylesheet" href="../css/custom.css">
  <style type="text/css">
    html , body, #app, .page, .page-content {
      background: none transparent !important;
      background-color: transparent !important;
    }    
    #cordova-plugin-qrscanner-video-preview{
/*      z-index: 100 !important;*/
      min-height: auto !important;
      min-width: auto !important;
      background-color: #8080803d !important;
    }
    #cordova-plugin-qrscanner-still{
/*      z-index: 99 !important;*/
    }
  </style>
  <script>
      function onDeviceReady () {
        alert('SCAN PAGE ',cordova.plugins.barcodeScanner);
        cordova.plugins.barcodeScanner.scan(
          function(result){
            alert('SUCCESS SCAN');
            alert(result);
            if(!result.cancelled)
            {
                if(result.format == "QR_CODE")
                {
                    navigator.notification.prompt("Please enter name of data",  function(input){
                        var name = input.input1;
                        var value = result.text;

                        var data = localStorage.getItem("LocalData");
                        console.log(data);
                        data = JSON.parse(data);
                        data[data.length] = [name, value];

                        localStorage.setItem("LocalData", JSON.stringify(data));

                        alert("Done");
                    });
                }
            }        
          }, 
          function(err){
            alert('ERROR SCAN');
            alert(err)
          } 
        );
      }

      setTimeout(function () {
              document.addEventListener('deviceready', onDeviceReady, false);
      }, 9000);
  </script>  
</head>
<body >
  <div id="app">
    <div class="statusbar"></div>
    <div class="view view-main view-init ios-edges" data-url="/" style="
      background: none transparent !important;
      background-color: transparent !important;
      opacity: 0.1;">
      <div class="page no-toolbar no-navbar no-swipeback"  data-name="scan-page">

        <div class="page-content">
            
        </div>
      </div>
    </div>
  </div>

  <!-- cordova library -->
  <script type="text/javascript" src="../cordova.js"></script>
  
  <script src=".././lib/js/framework7.js"></script>
  <script src="../js/routes.js"></script>
  <script src="../js/app.js"></script>
  <script type="text/javascript">
    

    
  </script>
</body> 
</html>
