<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#2196f3">
  <meta http-equiv="Content-Security-Policy" content="default-src *; child-src * 'self' blob: polyblob: http:; img-src * 'self' data: http:; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src 'self' 'unsafe-inline' *; media-src * blob: polyblob:">

  <title>SIKA - Rewarding Loyalty Mobile application</title>
  <link rel="stylesheet" href="./lib/css/framework7.css">
  <link rel="stylesheet" href="css/app.css">
  <link rel="apple-touch-icon" href="img/f7-icon-square.png">
  <link rel="icon" href="img/f7-icon.png">
  <link rel="stylesheet" href="css/custom.css">
  <style type="text/css">
    .login-screen-content {
        background: #546e8d !important;
        color: #fafafa !important;
    }
    html , body, #app, .page, .page-content {
        background: none !important;
    }    
    #cordova-plugin-qrscanner-video-preview{
      z-index: 100 !important;
    }
  </style>
</head>
<body style="background-color: transparent !important;">
  <div id="app">
    <div class="statusbar"></div>
    <div class="view view-main" data-url="/login">
      <div class="page no-toolbar no-navbar no-swipeback">
        <div class="page-content login-screen-content">
          <div class="login-screen-title _brand">
            <img src="img/logo.png">
          </div>
          <form>
            <div class="list list70" >
              <ul>
                <li class="item-content item-input ">

                  <div class="item-inner">
                    <div class="item-input-wrap wrapper-item">
                      <span class="input-addon-button">
                        <img src="img/person.png">
                      </span>
                      <input type="text" placeholder="Your username" id="sika-username-2" class="input-with-value">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input ">

                  <div class="item-inner">
                    <div class="item-input-wrap wrapper-item">
                      <span class="input-addon-button">
                        <img src="img/key.png">
                      </span>
                      <input type="password" placeholder="Your password" id="sika-password-2" class="">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                
                </li>
              </ul>
            </div>
            <div class="list list70">
              <ul>
                <li><a href="#" class=" item-link list-button _button-sign"   >Sign In</a></li>
                <li><a href="./" class="item-link  _button-forgot" data-view=".view-main">Mot de pass oubli√© ?</a></li>
              </ul>
            </div>
            <DIV class="_nav-support">
              <img src="img/support.png">
            </DIV>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- cordova library -->
  <script type="text/javascript" src="cordova.js"></script>
  
  <script src="./lib/js/framework7.js"></script>
  <script src="js/routes.js"></script>
  <script src="js/app.js"></script>
  <script src="js/qrscanner.js"></script>

  <script>
        var signIn = function () {
          var app = this.app;
          console.log(app.routes[0]);
          var router = this.router;
          console.log(Dom7('#sika-username-2').val());
          console.log(Dom7('#sika-password-2').val());

          this.app.router.navigate('/',
            {
              name: 'homepage',
              params: { 
                username: Dom7('#sika-username-2').val(), 
                password: Dom7('#sika-password-2').val()
              }
              // ,
              // force: true, 
              // ignoreCache: true
            }
          );

        };

      function onDeviceReady () {
        alert('SCAN PAGE ');
        cordova.plugins.barcodeScanner.scan(
           function (result) {
               alert("We got a barcode\n" +
                     "Result: " + result.text + "\n" +
                     "Format: " + result.format + "\n" +
                     "Cancelled: " + result.cancelled);
           }, 
           function (error) {
               alert("Scanning failed: " + error);
           },
           {
               "preferFrontCamera" : false, // iOS and Android
               "showFlipCameraButton" : true, // iOS and Android
               "prompt" : "Aim for the QR IMAGE", // supported on Android only
               "formats" : "QR_CODE,PDF_417", // default: all but PDF_417 and RSS_EXPANDED
               "orientation" : "portrait" // Android only (portrait|landscape), default unset so it rotates with the device
           }
        );

      }

      setTimeout(function () {
              document.addEventListener('deviceready', onDeviceReady, false);
      }, 2000);        
  </script>
</body>
</html>